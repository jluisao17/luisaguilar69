<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <title>SecureShare | Iniciar Sesión con NEAR</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Iniciar sesión en SecureShare con NEAR Wallet" name="description">

    <!-- Fuentes y estilos -->
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Nunito:wght@600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="components/css/bootstrap.min.css" rel="stylesheet">
    <link href="components/css/style2.css" rel="stylesheet">

    <!-- NEAR API -->
    <script src="https://cdn.jsdelivr.net/npm/near-api-js/dist/near-api-js.min.js"></script>
</head>

<body>
    <!-- Barra de navegación -->
    <div class="container-fluid position-relative p-0">
        <nav class="navbar navbar-expand-lg navbar-light px-4 px-lg-5 py-3 py-lg-0">
            <a href="index.html" class="navbar-brand p-0">
                <h1 class="text-primary m-0"><i class="bi-cloud-arrow-up-fill me-3"></i>SecureShare</h1>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto py-0">
                    <a href="index.html" class="nav-item nav-link">Inicio</a>
                    <a href="about.html" class="nav-item nav-link">Acerca de</a>
                    <a href="contact.html" class="nav-item nav-link">Contacto</a>
                </div>
            </div>
        </nav>
    </div>
    <!-- Fin Barra de navegación -->

    <!-- Formulario de Login con NEAR Wallet -->
    <div class="container-fluid bg-primary py-5 mb-5 hero-header">
        <div class="container py-5">
            <div class="row justify-content-center py-5">
                <div class="col-lg-5">
                    <div class="bg-white p-4 rounded shadow">
                        <h3 class="text-center mb-4">Iniciar Sesión con NEAR</h3>
                        <div class="text-center">
                            <button id="login-button" class="btn btn-primary rounded-pill py-2 px-4">Iniciar Sesión con NEAR Wallet</button>
                        </div>
                        <div class="text-center mt-3">
                            <a href="#" id="logout-button" class="btn btn-danger rounded-pill py-2 px-4" style="display:none;">Cerrar Sesión</a>
                        </div>
                        <div class="text-center mt-3" id="account-info" style="display:none;">
                            <p>Conectado como: <span id="account-id"></span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Fin Formulario de Login con NEAR Wallet -->

     <!-- Sobre Nosotros -->
     <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s" style="min-height: 400px;">
                    <div class="position-relative h-100">
                        <img class="img-fluid position-absolute w-100 h-100" src="/components/img/Cryptos-4.jpeg" alt="" style="object-fit: cover;">
                    </div>
                </div>
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.3s">
                    <h6 class="section-title bg-white text-start text-primary pe-3">Sobre Nosotros</h6>
                    <h1 class="mb-4">Bienvenido a <span class="text-primary">BitExchange</span></h1>
                    <p class="mb-4">En BitExchange, somos un equipo apasionado por la privacidad digital, 
                        la descentralización y las tecnologías disruptivas. Con experiencia en el desarrollo 
                        de soluciones basadas en blockchain, criptografía y sistemas distribuidos, 
                        nos dedicamos a construir una plataforma que respete la autonomía del usuario
                         y ofrezca una solución segura para el intercambio de archivos en un mundo 
                         cada vez más conectado.</p>
                    <div class="row gy-2 gx-4 mb-4">
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i> Privacidad Garantizada</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>descentralización total</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Control total sobre los archivos compartidos</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Mayor seguridad</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Sin censura o restricciones geograficas</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i> Interoperabilidad con el ecosistema blockchain</p>
                        </div>
                    </div>
                    <a class="btn btn-primary py-3 px-5 mt-2" href="">Leer más</a>
                </div>
            </div>
        </div>
    </div>
    <!-- Fin Sobre Nosotros -->

    <!-- Footer -->
    <footer class="container-fluid bg-dark text-white py-4">
        <div class="container text-center">
            <p class="mb-0">&copy; 2024 SecureShare. Todos los derechos reservados.</p>
        </div>
    </footer>
    <!-- Fin Footer -->

    <!-- Scripts -->
    <script>
        // Configuración de la red NEAR
        const nearConfig = {
            networkId: "testnet", // Cambia a "mainnet" si estás en producción
            keyStore: new nearApi.keyStores.BrowserLocalStorageKeyStore(),
            nodeUrl: "https://rpc.testnet.near.org",
            walletUrl: "https://wallet.testnet.near.org", // Cambia si usas mainnet
            helperUrl: "https://helper.testnet.near.org",
            explorerUrl: "https://explorer.testnet.near.org"
        };
    
        async function initNEAR() {
            const near = await nearApi.connect(nearConfig);
            const wallet = new nearApi.WalletConnection(near, 'BitExchange'); // appKeyPrefix "secureShare"
    
            // Verifica si el usuario ya está autenticado
            if (!wallet.isSignedIn()) {
                // Si no está autenticado, inicia el proceso de inicio de sesión
                await wallet.requestSignIn(
                    "", // Nombre del contrato (opcional, si no usas contratos, deja como cadena vacía)
                    "BitExchange", // Nombre de la aplicación
                    window.location.href, // Redirección en caso de éxito
                    window.location.href  // Redirección en caso de fallo
                );
            } else {
                // Si el usuario ya está autenticado, puedes obtener su cuenta
                const accountId = wallet.getAccountId();
                document.getElementById("account-id").innerText = accountId;
                document.getElementById("account-info").style.display = "block";
                document.getElementById("logout-button").style.display = "block";
                document.getElementById("login-button").style.display = "none";
            }
        }
    
        // Inicializar NEAR al hacer clic en "Iniciar Sesión"
        document.getElementById("login-button").onclick = async function () {
            await initNEAR();
        };
    
        // Cerrar sesión
        document.getElementById("logout-button").onclick = async function () {
            const near = await nearApi.connect(nearConfig);
            const wallet = new nearApi.WalletConnection(near, 'BitExchange');
            wallet.signOut();
            window.location.reload();
        };
    
        // Comprobar el estado de inicio de sesión cuando se carga la página
        window.onload = async function () {
            const near = await nearApi.connect(nearConfig);
            const wallet = new nearApi.WalletConnection(near, 'BitExchange');
            if (wallet.isSignedIn()) {
                const accountId = wallet.getAccountId();
                document.getElementById("account-id").innerText = accountId;
                document.getElementById("account-info").style.display = "block";
                document.getElementById("logout-button").style.display = "block";
                document.getElementById("login-button").style.display = "none";
            }
        };
    </script>

</body>

</html>